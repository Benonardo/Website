<!DOCTYPE html>
<html>
    <head>   
        <title>TomatenKuchen</title>
        <link rel="stylesheet" type="text/css" href="style.css" />
		<link rel="shortcut icon" type="image/x-icon" href="./icon.ico" />
    </head>
    <body>
        <nav>
            <ul>
                <li><a tabindex="0" aria-current="page"></a>Startseite</li>
                <li><a href="/settings/">Einstellungen</a></li>
            </ul>
        </nav>
        <p id="info" style="display: none;"></p>
        <button id="logout" style="display: none;" onclick="logout()">Abmelden</button>
        <button id="login" style="display: none;" onclick="login()">Anmelden</button>
        <script>
            function getCookie(cname) {
                var name = cname + "="
                var decodedCookie = decodeURIComponent(document.cookie)
                var ca = decodedCookie.split(';')
                for (var i = 0; i <ca.length; i++) {
                    var c = ca[i]
                    while (c.charAt(0) == ' ') {
                        c = c.substring(1)
                    }
                    if (c.indexOf(name) == 0) return c.substring(name.length, c.length)
                }
                return ""
            }

            window.onload = () => {
                let cookie = getCookie("access_token")

                if (cookie) {
                    window.location.replace("http://136.243.92.96:7025/settings/")
                } else {
                    document.getElementById('login').style.display = 'block'
                }
            }

            login = () => {
                window.location.replace("https://discord.com/api/oauth2/authorize?client_id=685166801394335819&redirect_uri=http%3A%2F%2F136.243.92.96%3A7025%2Fsettings&response_type=token&scope=identify%20guilds")
            }
            logout = () => {
                window.location.replace("http://136.243.92.96:7025/")
            }
        </script>
    </body>
</html>
